$(window).on("resize",(function(){})),$(window).on("load",(function(){})),$(window).on("orientationchange",(function(){}));let zoomScale=1;function windowResize(){pageWidth=$(window).width(),uiWidth=$(".wrapper").width(),pageHeight=$(window).height(),uiHeight=$(".wrapper").height(),pageWidth<uiWidth||pageHeight<uiHeight?(scaleX=pageWidth/uiWidth,scaleY=pageHeight/uiHeight,scaleX>scaleY?(scale=scaleY,zoomScale=scale):(scale=scaleX,zoomScale=scale),$(".inventory").css({transform:`translate(-50%, 0) scale(${scale})`,bottom:parseInt($(".inventory").css("top"))-$(".inventory").offset().top+10}),$(".inventory").css({transform:`translate(-50%, 0) scale(${scale})`,bottom:parseInt($(".inventory").css("top"))-$(".inventory").offset().top+10}),$(".chat").css({transform:`scale(${scale})`,left:parseInt($(".chat").css("left"))-$(".chat").offset().left+10,bottom:parseInt($(".chat").css("top"))-$(".chat").offset().top+10}),$(".chat").css({transform:`scale(${scale})`,left:parseInt($(".chat").css("left"))-$(".chat").offset().left+10,bottom:parseInt($(".chat").css("top"))-$(".chat").offset().top+10}),$(".bots").css({transform:`translate(-50%, 0) scale(${scale})`,top:parseInt($(".bots").css("top"))-$(".bots").offset().top+10}),$(".bots").css({transform:`translate(-50%, 0) scale(${scale})`,top:parseInt($(".bots").css("top"))-$(".bots").offset().top+10}),$(".wrapper, .modal.show, .alert.show").attr("style","transform: translate(-50%, -50%) scale("+scale+");")):zoomScale=1}$("[hide]").click((function(){let t=$(this).attr("hide");$(t).hide()})),$("[show]").click((function(){let t=$(this).attr("show");$(t).show()})),$("[click]").click((function(){let t=$(this).attr("click");$(t).click()})),$(".servermode .header").click((function(){let t=$(this).closest(".serverlist").attr("serverlist"),e=$(this).parents(".servermode"),s=e.hasClass("toggled"),a=e.find(".body");$(`[serverlist=${t}] .servermode.toggled`).length>0&&!s&&($(`[serverlist=${t}] .servermode.toggled .body`).css({height:"0px"}),$(`[serverlist=${t}] .servermode.toggled`).removeClass("toggled"));let i=a.children(".servers").children().length,o=85+75*(Math.ceil(i/4)-1);s?(e.removeClass("toggled"),a.css({height:"0px"})):(e.addClass("toggled"),a.css({height:`${o}px`}))})),$(".servermode .body button").click((function(){$(this).hasClass("active")||($(".servermode .body button.active").removeClass("active"),$(".servermode .header.active").removeClass("active"),$(this).addClass("active"),$(this).parents(".body").prev(".header").addClass("active"))}));let prevModal="";function modal(t,e){if($(".modal.show").length>0&&"show"===e)prevModal=$(".modal.show"),prevModal.removeClass("show").addClass("hide").css({transform:"translate(-50%, -50%) scale(0)"}),setTimeout((()=>{t.removeClass("hide").addClass("show").css({transform:"translate(-50%, -50%) scale("+zoomScale+")"})}),100);else switch(e){case"show":$(".modals").show(),$(".modals .overlay").fadeIn(200),t.removeClass("hide").addClass("show").css({transform:"translate(-50%, -50%) scale("+zoomScale+")"});break;case"hide":prevModal.length?($(".modal.show").removeClass("show").addClass("hide").css({transform:"translate(-50%, -50%) scale(0)"}),setTimeout((()=>{prevModal.removeClass("hide").addClass("show").css({transform:"translate(-50%, -50%) scale("+zoomScale+")"}),prevModal=""}),100)):($(".modals .overlay").fadeOut(200),t.removeClass("show").addClass("hide").css({transform:"translate(-50%, -50%) scale(0)"}),setTimeout((()=>{$(".modals").hide()}),200))}}function itemInfoAlert(t,e){this.title=t,this.text=e,this.elements={title:$("[alert-title]"),body:$("[alert-body]"),buttons:$("[alert-buttons]")},this.show=function(){$(".alerts").show(),$(".alerts .overlay").fadeIn(200),$(".alerts .alert").removeClass("hide").addClass("show").css({transform:"translate(-50%, -50%) scale("+zoomScale+")"})},this.hide=function(){$(".alerts .overlay").fadeOut(200),$(".alerts .alert").removeClass("show").addClass("hide").css({transform:"translate(-50%, -50%) scale(0)"}),$("[alert-cancel], [alert-confirm]").off("click"),setTimeout((()=>{$(".alerts").hide();let{title:t,body:e,buttons:s}=this.elements;t.empty(),e.empty(),s.empty()}),200)},this.prepare=function(){let{title:t,body:e,buttons:s}=this.elements;t.text(this.title),e.html(`<p>${this.text}</p>`),s.html('<button class="btn primary small" alert-cancel>Ok!</button>'),$("[alert-cancel], .alerts .overlay").click((function(){hide()})),this.show()},this.prepare()}function warnBeforeCraft(t,e){this.name=t,this.level=e.level,this.runes=e.runes,this.time=e.time,this.energy=e.energy,this.elements={title:$("[alert-title]"),body:$("[alert-body]"),buttons:$("[alert-buttons]")},this.show=function(){$(".alerts").show(),$(".alerts .overlay").fadeIn(200),$(".alerts .alert").removeClass("hide").addClass("show").css({transform:"translate(-50%, -50%) scale("+zoomScale+")"})},this.hide=function(){$(".alerts .overlay").fadeOut(200),$(".alerts .alert").removeClass("show").addClass("hide").css({transform:"translate(-50%, -50%) scale(0)"}),$("[alert-cancel], [alert-confirm]").off("click"),setTimeout((()=>{$(".alerts").hide();let{title:t,body:e,buttons:s}=this.elements;t.empty(),e.empty(),s.empty()}),200)},this.prepare=function(){let{title:t,body:e,buttons:s}=this.elements,a=moment.duration({seconds:1*time}),i=1===a.years()?a.years()+" year ":a.years()>1?a.years()+" years ":"",o=1===a.days()?a.days()+" day ":a.days()>1?a.days()+" days ":"",r=1===a.hours()?a.hours()+" hour ":a.hours()>1?a.hours()+" hours ":"",n=a.minutes()>0?a.minutes()+" minutes":"";t.text("Craft Confirmation");let l=`<p>How many <b>${this.name}</b> would you like to craft?</p>\n        <input craft-amount type="number" min="1" value="1"/>\n        <p>This will cost you</p><div class="runesamount"><span air-amount><b>${this.runes.air}</b> Air</span><span nature-amount><b>${this.runes.nature}</b> Nature</span><span cosmic-amount><b>${this.runes.cosmic}</b> Cosmic</span><span energy-amount><b>${this.energy}</b> Energy</span></div>\n        <p>Time to Craft: <b time-craft>${i+o+r+n}</b></p>\n        <p>Completed at: <b completed-craft>${moment().add(1*time,"seconds").format("MMMM Do YYYY, hh:mm A")}</b></p>\n        `;e.html(l),s.html('<button class="btn small success" alert-confirm>Confirm</button>\n        <button class="btn small danger" alert-cancel>Cancel</button>');var c=setInterval((function(){$("[completed-craft]").text(moment().add($("[craft-amount]").val()*time,"seconds").format("MMMM Do YYYY, hh:mm A"))}),1e3);$("[craft-amount]").on("input",(function(){a=moment.duration({seconds:$(this).val()*time}),i=1===a.years()?a.years()+" year ":a.years()>1?a.years()+" years ":"",o=1===a.days()?a.days()+" day ":a.days()>1?a.days()+" days ":"",r=1===a.hours()?a.hours()+" hour ":a.hours()>1?a.hours()+" hours ":"",n=a.minutes()>0?a.minutes()+" minutes":"",$("[time-craft]").text(i+o+r+n),$("[completed-craft]").text(moment().add($(this).val()*time,"seconds").format("MMMM Do YYYY, hh:mm A"));let t=runes.air*$(this).val(),e=runes.nature*$(this).val(),s=runes.cosmic*$(this).val();$("[air-amount]").html(`<b>${t}</b> Air`),$("[nature-amount]").html(`<b>${e}</b> Nature`),$("[cosmic-amount]").html(`<b>${s}</b> Cosmic`),$("[energy-amount]").html(`<b>${energy*$(this).val()}</b> Energy`)})),$("[alert-confirm]").click((function(){clearInterval(c)})),$("[alert-cancel], .alerts .overlay").click((function(){hide(),clearInterval(c)})),this.show()},this.prepare()}function warnBeforeBuy(t,e,s,a,i){this.type=t,this.currency=e,this.price=s,this.name=a,this.prodId=0,i&&(this.prodId=i),this.elements={title:$("[alert-title]"),body:$("[alert-body]"),buttons:$("[alert-buttons]")},this.show=function(){$(".alerts").show(),$(".alerts .overlay").fadeIn(200),$(".alerts .alert").removeClass("hide").addClass("show").css({transform:"translate(-50%, -50%) scale("+zoomScale+")"})},this.hide=function(){$(".alerts .overlay").fadeOut(200),$(".alerts .alert").removeClass("show").addClass("hide").css({transform:"translate(-50%, -50%) scale(0)"}),$("[alert-cancel], [alert-confirm]").off("click"),setTimeout((()=>{$(".alerts").hide();let{title:t,body:e,buttons:s}=this.elements;t.empty(),e.empty(),s.empty()}),200)},this.prepare=function(){let{title:t,body:e,buttons:s}=this.elements;switch("levels"===this.currency&&(t.text("Claim Confirmation"),e.html(`<p>Are you sure that you want to claim the <b>${this.name}</b> ${this.type}?</p>`)),"coins"===this.currency&&"minions"!==this.type&&"runes"!==this.type&&(t.text("Purchase Confirmation"),e.html(`<p>Are you sure that you want to buy the <b>${this.name}</b> ${this.type}?</p>\n            <p>This will cost you <b><i class="fas fa-coins"></i> ${this.price}</b></p>`)),"coins"===this.currency&&"minions"===this.type&&(t.text("Purchase Confirmation"),e.html(`<p>Are you sure that you want to buy <b>${this.name}</b>?</p>\n            <p>This will cost you <b><i class="fas fa-coins"></i> ${this.price}</b></p>`)),"coins"===this.currency&&"runes"===this.type&&(t.text("Purchase Confirmation"),e.html(`<p>Are you sure that you want to buy <b>${this.name}</b>?</p>\n            <p>This will cost you <b><i class="fas fa-coins"></i> ${this.price}</b></p>`)),s.html('<button class="btn small success" alert-confirm>Confirm</button>\n        <button class="btn small danger" alert-cancel>Cancel</button>'),this.type){case"skin":("coins"===this.currency||"levels"===this.currency)&&$("[alert-confirm]").click((function(){}));break;case"wearable":"coins"===this.currency&&$("[alert-confirm]").click((function(){}));break;case"items":if(console.log("try buy items"),"coins"===this.currency){let t=this.prodId;$("[alert-confirm]").click((function(){purchaseItem(t,1),hide()}))}break;case"minions":console.log("buy minions?");let t=this.prodId;$("[alert-confirm]").click((function(){console.log("buy minions clicked yes"),console.log("prodId: "+t),purchaseMinion(t),hide()}));break;case"potion":"coins"===this.currency&&$("[alert-confirm]").click((function(){}))}$("[alert-cancel], .alerts .overlay").click((function(){hide()})),this.show()},this.prepare()}$("[modal-btn]").click((function(){let t=$(this).attr("target"),e=$(this).attr("action");windowResize(),modal($(t),e)})),$("[warn-before-buy]").click((function(){let t=JSON.parse($(this).attr("warn-before-buy"));warnBeforeBuy(t.type,t.currency,t.price,t.name,t.prodId)})),$("[warn-before-craft]").click((function(){let t=JSON.parse($(this).attr("warn-before-craft"));warnBeforeCraft(t.name,t.price)})),$("[item-info]").click((function(){let t=JSON.parse($(this).attr("item-info"));itemInfoAlert(t.title,t.text)})),$("[toggle-minions]").click((function(){$(".bots button:first-child").toggle()})),$("[region]").click((function(){$(this).hasClass("active")||($("[region].active").removeClass("active"),$(this).addClass("active"),$("[serverlist]").hide(),$(`[serverlist=${$(this).attr("region")}]`).show())})),$("[shop-nav]").click((function(){if($(this).hasClass("active"))return;let t=$(this).attr("shop-nav");$("[shop-nav].active").removeClass("active"),$(this).addClass("active"),$("[shop]").hide(),$(`[shop=${t}]`).show()})),$("[inner-shop-nav]").click((function(){if($(this).hasClass("active"))return;$(this).parents(".inner-nav").children(".active").removeClass("active");let t=$(this).attr("inner-shop-nav");$(this).parent().parents(".shop-page").children(".inner-shop").hide(),$(this).parents(".shop-page").find(`[inner-shop=${t}]`).show(),$(this).addClass("active")})),$("[inner-shop-nav-skins]").click((function(){if($(this).hasClass("active"))return;$(this).parents(".inner-nav").children(".active").removeClass("active");let t=$(this).attr("inner-shop-nav-skins");$("#skinBrowser").children(".inner-shop").hide(),$("#skinBrowser").find(`[inner-shop=${t}]`).show(),$(this).addClass("active")})),$("[friends-nav]").click((function(){if($(this).hasClass("active"))return;let t=$(this).attr("friends-nav");$("[friends-nav].active").removeClass("active"),$(this).addClass("active"),$("[friends]").hide(),$(`[friends=${t}]`).show()})),$("[settings-nav]").click((function(){if($(this).hasClass("active"))return;let t=$(this).attr("settings-nav");$("[settings-nav].active").removeClass("active"),$(this).addClass("active"),$("[settings]").hide(),$(`[settings=${t}]`).show()}));